/*! ts-datepicker v1.0.5, @license MIT */
(function(g,f){if(typeof exports=="object"&&typeof module<"u"){module.exports=f()}else if("function"==typeof define && define.amd){define(f)}else {g["DatePicker"]=f()}}(typeof globalThis < "u" ? globalThis : typeof self < "u" ? self : this,function(){var exports={};var __exports=exports;var module={exports};
"use strict";var A=Object.defineProperty,Oe=Object.defineProperties,Ie=Object.getOwnPropertyDescriptor,He=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertyNames,de=Object.getOwnPropertySymbols;var pe=Object.prototype.hasOwnProperty,Ae=Object.prototype.propertyIsEnumerable;var Z=(s,t,e)=>t in s?A(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e,m=(s,t)=>{for(var e in t||(t={}))pe.call(t,e)&&Z(s,e,t[e]);if(de)for(var e of de(t))Ae.call(t,e)&&Z(s,e,t[e]);return s},x=(s,t)=>Oe(s,He(t));var Ne=(s,t)=>{for(var e in t)A(s,e,{get:t[e],enumerable:!0})},Re=(s,t,e,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of Be(t))!pe.call(s,n)&&n!==e&&A(s,n,{get:()=>t[n],enumerable:!(i=Ie(t,n))||i.enumerable});return s};var Ye=s=>Re(A({},"__esModule",{value:!0}),s);var o=(s,t,e)=>Z(s,typeof t!="symbol"?t+"":t,e);var lt={};Ne(lt,{default:()=>J});module.exports=Ye(lt);var Ke=["left","center","right","top","middle","bottom","outside"],je="datepicker-position--",c={datepicker:"datepicker",picker:"datepicker-picker",navigation:"datepicker--navigation",content:"datepicker--content",buttons:"datepicker--buttons",navContainer:"datepicker-nav",navAction:"datepicker-nav--action",navTitle:"datepicker-nav--title",body:"datepicker-body",dayNames:"datepicker-body--day-names",dayName:"datepicker-body--day-name",weekNumbers:"datepicker-body--week-numbers",daysContainer:"datepicker-days",cells:"datepicker-body--cells",cell:"datepicker-cell",buttonsContainer:"datepicker-buttons",button:"datepicker-button",active:"active",inline:"inline",hidden:"hidden",disabled:"disabled",current:"current",focused:"focus",selected:"selected",minDate:"min-date",maxDate:"max-date",otherMonth:"other-month",otherDecade:"other-decade",rangeFrom:"range-from",rangeTo:"range-to",inRange:"in-range",rangeDisabled:"range-disabled",editMode:"edit-mode",hasWeekNumbers:"has-week-numbers",positions:Ke.reduce((s,t)=>(s[t]=je+t,s),{})};var fe={prevMonth:{keys:{key:"ArrowLeft",ctrl:!0},callback:"prevMonth",preventDefault:!0},nextMonth:{keys:{key:"ArrowRight",ctrl:!0},callback:"nextMonth",preventDefault:!0},prevYear:{keys:{key:"ArrowLeft",shift:!0},callback:"prevYear",preventDefault:!0},nextYear:{keys:{key:"ArrowRight",shift:!0},callback:"nextYear",preventDefault:!0},switchView:{keys:{key:"ArrowUp",ctrl:!0},callback:"switchView",preventDefault:!0},exitEditMode:{keys:{key:"ArrowDown",ctrl:!0},callback:"exitEditMode",preventDefault:!0}};var S=["days","months","years"],G={allowInput:!0,altInput:!1,altInputFormat:"M d, yyyy",autoClose:!0,buttons:!1,classes:"",container:null,dateDelimiter:",",dateFormat:null,defaultDate:"",disabledDates:[],enabledDates:[],inline:!1,keyboardNav:!0,keybinds:fe,locale:"en",maxDate:null,minDate:null,maxView:"years",minView:"days",startView:"days",monthsField:"monthsShort",multipleDates:!1,navTitles:{days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},nextArrow:"",prevArrow:"",offset:0,position:"auto",range:!1,dynamicRange:!0,rtl:null,showOtherMonths:!0,selectOtherMonths:!0,selectOtherYears:!0,showOn:!0,toggleSelected:!0,updateOnBlur:!0,weekNumbers:!1,weekStart:null,onBeforeSelect:null,onRenderCell:null,onShow:null,onHide:null,onFocus:null,onChangeDate:null,onChangeView:null,onChangeViewDate:null};function me(){return G}var N=class{constructor(){o(this,"__listeners",new Map)}on(t,e){if(!e)return()=>{};let i=this.__listeners.get(t);return i||(i=[],this.__listeners.set(t,i)),i.push(e),()=>this.off(t,e)}off(t,e){if(typeof t=="undefined")return this.__listeners.clear();if(typeof e=="undefined"){this.__listeners.delete(t);return}let i=this.__listeners.get(t);if(i){let n=i.indexOf(e);n>-1&&(i.splice(n,1),i.length||this.__listeners.delete(t))}}trigger(t,e){t instanceof CustomEvent||(t=new CustomEvent(t,{detail:e}));let i=this.__listeners.get(t.type);i&&i.forEach(n=>n(t))}};var ge={days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",format:"mm/dd/yyyy",weekStart:0},De={default:ge,en:ge};var Q={today:{content:s=>s.locale.today,onClick:s=>{let t=new Date;if(s.config.range)s.selectDate([t,t]);else{let e=s.adapter.getSelectedDate(t);e?s.adapter.handleAlreadySelectedDates(e,t):s.selectDate(t)}}},clear:{content:s=>s.locale.clear,onClick:s=>s.clear()}};function ye(s){return Q[s]}function F(s){let t=document.createElement("template");return t.innerHTML=s,t.content}function M(...s){let t=[];return s.forEach(e=>{if(typeof e=="object")for(let i in e)e[i]&&t.push(i);else e&&t.push(e)}),t}function ee(s){let t=We(s);return!t||t===document.body?null:window.getComputedStyle(t).overflow==="visible"?ee(t):t}function We(s){return s.parentElement||(s.parentNode instanceof ShadowRoot?s.parentNode.host:null)}function te(s){return window.getComputedStyle(s).direction}var R=class{constructor(t){o(this,"datePicker");o(this,"element");this.datePicker=t,this.element=document.createElement("div"),this.element.classList.add(c.buttonsContainer),this._render()}destroy(){this.datePicker=null,this.element.remove(),this.element=null}update(){this._clearButtons(),this._render()}_render(){let t=this.datePicker.config.buttons;t===!1||this.element.childElementCount||(Array.isArray(t)||(t=[t]),t.forEach(e=>{if(typeof e=="string"){if(!Q[e])return;e=ye(e)}let i=this._createButton(e);this.element.append(i)}))}_createButton(t){let e=document.createElement(t.tagName||"button"),i=typeof t.content=="function"?t.content(this.datePicker):t.content;if(e.append(F(i)),e.classList.add(...M(c.button,t.className)),t.attributes&&Object.keys(t.attributes).forEach(n=>{t.attributes[n]!==void 0&&e.setAttribute(n,t.attributes[n])}),t.onClick){let n=t.onClick;e.addEventListener("click",()=>n(this.datePicker))}return e}_clearButtons(){this.element.innerHTML=""}};function k(s){return new Date(s).setHours(0,0,0,0)}function H(){return new Date().setHours(0,0,0,0)}function v(s){let t=Math.floor(s.getFullYear()/10)*10;return[t,t+9]}function be(s){return new Date(s.getFullYear(),s.getMonth()+1,0).getDate()}function ie(s,t){return new Date(s.getFullYear(),s.getMonth(),s.getDate()+t)}function ve(s,t){return new Date(s.getFullYear(),s.getMonth(),s.getDate()-t)}function Y(s,t=!1){return s.slice().sort((e,i)=>t?e.getTime()-i.getTime():k(e)-k(i))}function f(s,t,e){if(!s||!t)return!1;switch(e){case"days":return s.getDate()===t.getDate()&&s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear();case"months":return s.getMonth()===t.getMonth()&&s.getFullYear()===t.getFullYear();case"years":return s.getFullYear()===t.getFullYear()}}function w(s,t,e=!1){let i=k(s),n=k(t);return e?i<=n:i<n}function y(s,t,e=!1){let i=k(s),n=k(t);return e?i>=n:i>n}function we(s,t,e){return y(s,t)&&w(s,e)}function ke(s,t){return(s-t+7)%7}function V(s,t,e){s=typeof s=="number"?new Date(s):s;let i=s.getDay();return ie(s,ke(t,e)-ke(i,e))}function Ee(s,t){switch(t){case 6:return Ue(s);case 0:return ze(s);default:return $e(s)}}function $e(s){let t=V(s,4,1),e=V(new Date(t).setMonth(0,4),4,1);return Le(t.getTime(),e.getTime())}function ze(s){return _e(s,0)}function Ue(s){return _e(s,6)}function Le(s,t){return Math.round((s-t)/6048e5)+1}function _e(s,t){let e=V(new Date(s).setMonth(0,1),t,t),i=V(s,t,t),n=Le(i.getTime(),e.getTime());if(n<53)return n;let a=V(new Date(s).setDate(32),t,t);return i===a?1:n}var se=Object.prototype.toString,qe=Object.prototype.hasOwnProperty,Pe=Symbol.prototype.valueOf,Me=Object.keys,Je=ArrayBuffer.isView;function ae(s,t){return ne(s,t)}function ne(s,t,e,i){if(s===t)return s!==0||1/s===1/t;if(s==null||t==null)return!1;if(s!==s)return t!==t;let n=typeof s;return n!=="function"&&n!=="object"&&typeof t!="object"?!1:Xe(s,t,e,i)}function Xe(s,t,e,i){let n=se.call(s);if(n!==se.call(t))return!1;switch(n){case"[object RegExp]":case"[object String]":return""+s==""+t;case"[object Number]":return+s!=+s?+t!=+t:+s==0?1/+s===1/t:+s==+t;case"[object Date]":case"[object Boolean]":return+s==+t;case"[object Symbol]":return Pe.call(s)===Pe.call(t);case"[object ArrayBuffer]":case"[object DataView]":return!1}let a=n==="[object Array]";if(!a&&Ge(s)){if(Te(s)!==Te(t))return!1;if(s.buffer===t.buffer&&s.byteOffset===t.byteOffset)return!0;a=!0}if(!a){if(typeof s!="object"||typeof t!="object")return!1;let l=s.constructor,h=t.constructor;if(l!==h&&!(typeof l=="function"&&l instanceof l&&typeof h=="function"&&h instanceof h)&&"constructor"in s&&"constructor"in t)return!1}e=e||[],i=i||[];let r=e.length;for(;r--;)if(e[r]===s)return i[r]===t;if(e.push(s),i.push(t),a){if(r=s.length,r!==t.length)return!1;for(;r--;)if(!ne(s[r],t[r],e,i))return!1}else{let l=Me(s),h;if(r=l.length,Me(t).length!==r)return!1;for(;r--;)if(h=l[r],!(Ze(t,h)&&ne(s[h],t[h],e,i)))return!1}return e.pop(),i.pop(),!0}function Ze(s,t){return s!=null&&qe.call(s,t)}function Te(s){return s==null?void 0:s.byteLength}function Ge(s){return Je(s)&&se.call(s)!=="[object DataView]"}var K=class{constructor(t){o(this,"datePicker");o(this,"keybinds",[]);o(this,"keydownListener");this.datePicker=t;let e=this.datePicker.altInput||this.datePicker.element;this.keydownListener=this._onKeydown.bind(this),e.addEventListener("keydown",this.keydownListener);let i=this.datePicker.config.keybinds;i&&Object.keys(i).forEach(n=>this.on(i[n]))}destroy(){this.datePicker.element.removeEventListener("keydown",this.keydownListener),this.datePicker=null,this.keybinds=null}on(t){if(Array.isArray(t))return t.forEach(a=>this.on(a)),this;if(!t.keys||!t.callback)return this;if(Array.isArray(t.keys))return t.keys.forEach(a=>this.on(x(m({},t),{keys:a}))),this;let e=x(m({},t),{keys:x(m({},t.keys),{key:t.keys.key.toLowerCase()})}),i=this.keybinds.find(a=>ae(a.keys,e.keys));return i||(i={keys:e.keys,callbacks:[]},this.keybinds.push(i)),(Array.isArray(e.callback)?e.callback:[e.callback]).forEach(a=>i.callbacks.push({callback:a,preventDefault:!!e.preventDefault})),this}off(t){if(!t)return this.keybinds=[],this;if(Array.isArray(t))return t.forEach(i=>this.off(i)),this;if(!t.keys)return this;if(Array.isArray(t.keys))return t.keys.forEach(i=>this.off(x(m({},t),{keys:i}))),this;t=x(m({},t),{keys:x(m({},t.keys),{key:t.keys.key.toLowerCase()})});let e=this.keybinds.find(i=>ae(i.keys,t.keys));return e&&(t.callback&&(Array.isArray(t.callback)?t.callback:[t.callback]).forEach(n=>{let a=e.callbacks.findIndex(r=>r.callback===n);a>=0&&e.callbacks.splice(a,1)}),(!t.callback||!e.callbacks.length)&&this.keybinds.splice(this.keybinds.indexOf(e),1)),this}_onKeydown(t){let e=this.datePicker.isEditMode(),i=t.key.toLowerCase();if(i==="tab"){this._unfocus();return}if(i==="enter")if(t.preventDefault(),!this.datePicker.visible)this.datePicker.show();else if(e)this.datePicker.adapter.exitEditMode(!0);else{if(!this.datePicker.isMinView()){this.datePicker.changeView("down");return}let a=this.datePicker.focusDate;if(a){let r=this.datePicker.adapter.getSelectedDate(a);r?this.datePicker.adapter.handleAlreadySelectedDates(r,a):this.datePicker.selectDate(a);return}}if(i==="escape"){this.datePicker.hide();return}let n=this._findKeybinds(t);if(n.length){this._handleKeybinds(t,n);return}if(!e&&this._focusNextCell(i)){t.preventDefault();return}this.datePicker.adapter.enterEditMode()}_findKeybinds(t){let e=t.key.toLowerCase(),i=t.ctrlKey||t.metaKey,{shiftKey:n,altKey:a}=t;return this.keybinds.filter(r=>r.keys.key==e&&(r.keys.ctrl==null||r.keys.ctrl===i)&&(r.keys.shift==null||r.keys.shift===n)&&(r.keys.alt==null||r.keys.alt===a))}_handleKeybinds(t,e){e.sort((i,n)=>Object.keys(n.keys).length-Object.keys(i.keys).length),e[0].callbacks.forEach(i=>{typeof i.callback=="string"?this._action(i.callback):i.callback(t,this.datePicker),i.preventDefault&&t.preventDefault()})}_action(t){switch(t){case"show":this.datePicker.show();break;case"hide":this.datePicker.hide();break;case"toggle":this.datePicker.visible?this.datePicker.hide():this.datePicker.show();break;case"prevMonth":case"nextMonth":case"prevYear":case"nextYear":break;case"switchView":this.datePicker.changeView("up");break;case"clear":this.datePicker.clear();break;case"today":this.datePicker.setViewDate(new Date);break;case"exitEditMode":this.datePicker.adapter.exitEditMode();break}}_focusNextCell(t){let{currentView:e}=this.datePicker,i=this._getFocusDate(),[n,a,r]=[i.getFullYear(),i.getMonth(),i.getDate()];switch(t){case"arrowleft":e==="days"&&(r-=1),e==="months"&&(a-=1),e==="years"&&(n-=1);break;case"arrowright":e==="days"&&(r+=1),e==="months"&&(a+=1),e==="years"&&(n+=1);break;case"arrowup":e==="days"&&(r-=7),e==="months"&&(a-=3),e==="years"&&(n-=4);break;case"arrowdown":e==="days"&&(r+=7),e==="months"&&(a+=3),e==="years"&&(n+=4);break;default:return!1}let l=this._clampDate(new Date(n,a,r));return this.datePicker.setFocusDate(l,!0),!0}_getFocusDate(){let{focusDate:t,selectedDates:e,viewDate:i}=this.datePicker,[n,a]=[i.getFullYear(),i.getMonth()],r=t||e[e.length-1];if(!r)switch(this.datePicker.currentView){case"days":r=new Date(n,a,new Date().getDate());break;case"months":r=new Date(n,a,1);break;case"years":r=new Date(n,0,1);break}return r}_clampDate(t){let{minDate:e,maxDate:i}=this.datePicker;return i&&y(t,i)?i:e&&w(t,e)?e:t}_unfocus(){this.datePicker.element!==document.activeElement&&(this.datePicker.config.updateOnBlur?this.datePicker.adapter.exitEditMode(!0):this.datePicker.adapter.setInputValue(),this.datePicker.hide())}};var Qe={days:"MM, <i>yyyy</i>",months:"yyyy",years:"yyyy1 - yyyy2"},j='<svg width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path d="M4.646 1.646a.5.5 0 0 1 .708 0l6 6a.5.5 0 0 1 0 .708l-6 6a.5.5 0 0 1-.708-.708L10.293 8 4.646 2.354a.5.5 0 0 1 0-.708"></path></svg>',W='<svg width="18" height="18" fill="currentColor" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0"></path></svg>',$=class{constructor(t){o(this,"datePicker");o(this,"element");o(this,"prevButton");o(this,"nextButton");o(this,"titleElement");o(this,"prevClickListener");o(this,"nextClickListener");o(this,"titleClickListener");o(this,"changeViewListener");o(this,"changeDateListener");this.datePicker=t,this.element=document.createElement("nav"),this.element.classList.add(c.navContainer),this._buildHtml(),this._updateArrows(),this.changeViewListener=()=>this._onChangeView(),this.changeDateListener=()=>setTimeout(()=>this.render()),this.datePicker.on("_changeCurrentView",this.changeViewListener),this.datePicker.on("changeViewDate",this.changeViewListener),this._hasNavTitleCallback()&&this.datePicker.on("_changeSelectedDate",this.changeDateListener),this.render(),this._updateNavStatus()}destroy(){this.datePicker.off("changeViewDate",this.changeViewListener),this.datePicker.off("_changeCurrentView",this.changeViewListener),this.datePicker.off("_changeSelectedDate",this.changeDateListener),this.datePicker=null,this.prevButton=null,this.nextButton=null,this.titleElement=null,this.element.remove(),this.element=null}render(){this.titleElement.innerHTML=this._getTitle(),this.titleElement.classList.toggle(c.disabled,this.datePicker.isMaxView())}update(){this.render(),this._updateNavStatus(),this._updateArrows()}_buildHtml(){this.prevClickListener=()=>this.datePicker.prev(),this.nextClickListener=()=>this.datePicker.next(),this.titleClickListener=()=>this.datePicker.changeView("up");let{nextArrow:t,prevArrow:e}=this.datePicker.config,i=this.datePicker.rtl;this.prevButton=document.createElement("button"),this.prevButton.classList.add(c.navAction,"prev"),this.prevButton.setAttribute("data-action","prev"),this.prevButton.append(F(i?t||j:e||W)),this.prevButton.addEventListener("click",this.prevClickListener),this.nextButton=document.createElement("button"),this.nextButton.classList.add(c.navAction,"next"),this.nextButton.setAttribute("data-action","next"),this.nextButton.append(F(i?e||W:t||j)),this.nextButton.addEventListener("click",this.nextClickListener),this.titleElement=document.createElement("button"),this.titleElement.classList.add(c.navTitle),this.titleElement.addEventListener("click",this.titleClickListener),this.element.append(this.prevButton,this.titleElement,this.nextButton)}_updateArrows(){let{nextArrow:t,prevArrow:e}=this.datePicker.config,i=this.datePicker.rtl;this.prevButton.innerHTML="",this.prevButton.append(F(i?t||j:e||W)),this.nextButton.innerHTML="",this.nextButton.append(F(i?e||W:t||j))}_hasNavTitleCallback(){let t=this.datePicker.config.navTitles;return Object.keys(t).some(e=>typeof t[e]=="function")}_getTitle(){let t=this.datePicker.currentView,e=this.datePicker.config.navTitles[t];return typeof e=="function"?e(this.datePicker):this.datePicker.formatDate(this.datePicker.viewDate,e||Qe[t])}_onChangeView(){this.render(),this._updateNavStatus()}_updateNavStatus(){let{minDate:t,maxDate:e,viewDate:i}=this.datePicker;if(this.prevButton.disabled=!1,this.prevButton.classList.remove(c.disabled),this.nextButton.disabled=!1,this.nextButton.classList.remove(c.disabled),!(!t&&!e))switch(this.datePicker.currentView){case"days":t&&t.getMonth()>=i.getMonth()&&t.getFullYear()>=i.getFullYear()&&(this.prevButton.disabled=!0,this.prevButton.classList.add(c.disabled)),e&&e.getMonth()<=i.getMonth()&&e.getFullYear()<=i.getFullYear()&&(this.nextButton.disabled=!0,this.nextButton.classList.add(c.disabled));break;case"months":t&&t.getFullYear()>=i.getFullYear()&&(this.prevButton.disabled=!0,this.prevButton.classList.add(c.disabled)),e&&e.getFullYear()<=i.getFullYear()&&(this.nextButton.disabled=!0,this.nextButton.classList.add(c.disabled));break;case"years":let n=v(i);t&&t.getFullYear()>=n[0]&&(this.prevButton.disabled=!0,this.prevButton.classList.add(c.disabled)),e&&e.getFullYear()<=n[1]&&(this.nextButton.disabled=!0,this.nextButton.classList.add(c.disabled));break}}};var et={days:"day",months:"month",years:"year"},z=class{constructor(t,e,i){o(this,"datePicker");o(this,"type");o(this,"date");o(this,"focused",!1);o(this,"disabled",!1);o(this,"selected",!1);o(this,"element");o(this,"renderOptions",null);o(this,"changeFocusListener");o(this,"changeSelectedListener");this.datePicker=t,this.type=e,this.date=i;let{onRenderCell:n}=this.datePicker.config;n&&(this.renderOptions=n(this.date,this.type,this.datePicker)||null),this._createElement(),this.changeFocusListener=({detail:{date:a}})=>this._onChangeFocus(a),this.changeSelectedListener=()=>this._onChangeSelected(),this.datePicker.on("_changeSelectedDate",this.changeSelectedListener),this.datePicker.on("_changeFocusedDate",this.changeFocusListener)}destroy(){this.datePicker.off("_changeSelectedDate",this.changeSelectedListener),this.datePicker.off("_changeFocusedDate",this.changeFocusListener),this.datePicker=null,this.element.remove(),this.element=null}render(){this.element.innerHTML=this._getContent(),this._updateClasses(),this._updateFocused(),this._updateSelected(),this._updateRangeStatus()}_createElement(){var a,r;let[t,e,i]=[this.date.getFullYear(),this.date.getMonth(),this.date.getDate()],n=m({"data-year":t+"","data-month":e+"","data-date":i+"","data-iso-date":`${t}-${e}-${i}`},(a=this.renderOptions)==null?void 0:a.attributes);this.element=document.createElement("div"),this.element.classList.add(...M(c.cell,et[this.type],(r=this.renderOptions)==null?void 0:r.classes)),Object.keys(n).forEach(l=>{this.element.setAttribute(l,n[l])})}_getContent(){var e;if((e=this.renderOptions)!=null&&e.content)return this.renderOptions.content;let t=this.datePicker.config;switch(this.type){case"days":return t.showOtherMonths||!this.datePicker.isOtherMonth(this.date)?""+this.date.getDate():"";case"months":return this.datePicker.locale[t.monthsField][this.date.getMonth()];case"years":return""+this.date.getFullYear()}}_updateClasses(){var l;let{config:t,minDate:e,maxDate:i}=this.datePicker,n=this._isOutOfMinMaxRange(),a=this.datePicker.isDateDisabled(this.date)||((l=this.renderOptions)==null?void 0:l.disabled)||!1,r=this.element.classList;switch(r.toggle(c.current,f(new Date,this.date,this.type)),r.toggle(c.minDate,e&&f(e,this.date,this.type)||!1),r.toggle(c.maxDate,i&&f(i,this.date,this.type)||!1),this.type){case"days":let h=this.datePicker.isOtherMonth(this.date);this.disabled=!t.selectOtherMonths&&h||n||a,r.toggle(c.otherMonth,h),r.toggle(c.disabled,this.disabled);break;case"months":this.disabled=n||a,r.toggle(c.disabled,a);break;case"years":let u=this.datePicker.isOtherDecade(this.date);this.disabled=!t.selectOtherYears&&u||n||a,r.toggle(c.otherDecade,u),r.toggle(c.disabled,this.disabled);break}}_updateFocused(){this.focused=f(this.datePicker.focusDate,this.date,this.type),this.element.classList.toggle(c.focused,this.focused)}_updateSelected(){this.selected=this.datePicker.isDateSelected(this.date,this.type),this.element.classList.toggle(c.selected,this.selected)}_updateRangeStatus(){let{focusDate:t,selectedDates:e}=this.datePicker;if(this.element.classList.remove(c.rangeFrom,c.rangeTo,c.inRange),!e.length||!this.datePicker.config.range)return;let{rangeDateFrom:i,rangeDateTo:n}=this.datePicker,a=this.element.classList;if(e.length===1&&t){let r=y(t,e[0]);i=r?e[0]:t,n=r?t:e[0]}a.toggle(c.inRange,i&&n&&we(this.date,i,n)||!1),a.toggle(c.rangeFrom,i&&f(this.date,i,this.type)||!1),a.toggle(c.rangeTo,n&&f(this.date,n,this.type)||!1)}_isOutOfMinMaxRange(){let{minDate:t,maxDate:e}=this.datePicker;if(!t&&!e)return!1;let i=this.type==="days",n=this.type==="years",a=!1;if(t){let r=new Date(this.date.getFullYear(),(n?t:this.date).getMonth(),(i?this.date:t).getDate());a=w(r,t)}if(e&&!a){let r=new Date(this.date.getFullYear(),(n?e:this.date).getMonth(),(i?this.date:e).getDate());a=y(r,e)}return a}_onChangeFocus(t){this._updateFocused(),t&&this._updateRangeStatus()}_onChangeSelected(){this.disabled||(this._updateSelected(),this._updateRangeStatus())}};var tt={days:`<div class="${c.daysContainer}"><div class="${c.dayNames}"></div><div class="${c.cells} days"></div></div>`,months:`<div class="${c.cells} months"></div>`,years:`<div class="${c.cells} years"></div>`},it=`<div class="${c.weekNumbers}"><div class="${c.dayNames}"><div class="${c.dayName}">&nbsp;</div></div><div class="${c.cells} weeks"></div></div>`,B=class s{constructor(t,e){o(this,"datePicker");o(this,"element");o(this,"selected",[]);o(this,"type");o(this,"isMinView",!1);o(this,"visible",!0);o(this,"cellsElement");o(this,"dayNamesElement");o(this,"weeksElement",null);o(this,"weeksContainer",null);o(this,"_cells",[]);o(this,"_cellsMap",new WeakMap);o(this,"_isRange",!1);o(this,"_pressed",!1);o(this,"_focusedDate",null);o(this,"_rangeFromFocused",!1);o(this,"_rangeToFocused",!1);o(this,"_rangeMoved",!1);o(this,"_ignoreClick",!1);o(this,"mouseOverListener");o(this,"mouseOutListener");o(this,"clickListener");o(this,"mouseDownListener");o(this,"mouseMoveListener");o(this,"mouseUpListener");o(this,"changeViewListener");o(this,"changeViewDateListener");this.datePicker=t,this.type=e;let i=this.datePicker.config;if(this.element=document.createElement("div"),this.element.classList.add(c.body,this.type),this.element.innerHTML=tt[this.type],this.cellsElement=this.element.querySelector(`.${c.cells}`),this.dayNamesElement=this.type==="days"?this.element.querySelector(`.${c.dayNames}`):null,this.isMinView=this.type===i.minView,this.type==="days"){this.dayNamesElement&&this._renderDayNames();let n=document.createElement("div");n.innerHTML=it,this.weeksElement=n.firstElementChild,this.weeksContainer=this.weeksElement.querySelector(`.${c.cells}`),i.weekNumbers&&this.element.prepend(this.weeksElement)}this.mouseOverListener=this._onMouseOver.bind(this),this.mouseOutListener=this._onMouseOut.bind(this),this.clickListener=this._onClick.bind(this),this.mouseDownListener=this._onMouseDown.bind(this),this.mouseMoveListener=this._onMouseMove.bind(this),this.mouseUpListener=this._onMouseUp.bind(this),this.element.addEventListener("mouseover",this.mouseOverListener),this.element.addEventListener("mouseout",this.mouseOutListener),this.element.addEventListener("click",this.clickListener),i.range&&i.dynamicRange&&(this._isRange=!0,this._bindRangeListeners()),this.changeViewListener=n=>this._onChangeView(n.detail),this.changeViewDateListener=({detail:n})=>this._onChangeViewDate(n.date,n.oldDate),this.datePicker.on("_changeCurrentView",this.changeViewListener),this.datePicker.on("changeViewDate",this.changeViewDateListener),this.render()}destroy(){this._removeRangeListeners(),this.datePicker.off("_changeCurrentView",this.changeViewListener),this.datePicker.off("changeViewDate",this.changeViewDateListener),this.datePicker=null,this._destroyCells(),this._cellsMap=null,this.cellsElement=null,this.dayNamesElement=null,this.weeksContainer=null,this.weeksElement=null,this.element.remove(),this.element=null}render(){this._destroyCells(),this._generateCells(),this._cells.forEach(t=>t.render()),this.type==="days"&&this._renderWeekNumbers()}update(){this.render(),this.type==="days"&&(this._renderDayNames(),this.datePicker.config.weekNumbers?this.element.contains(this.weeksElement)||this.element.prepend(this.weeksElement):this.weeksElement.remove());let t=this.datePicker.config,e=t.range&&t.dynamicRange;e&&!this._isRange?this._bindRangeListeners():!e&&this._isRange&&this._removeRangeListeners()}show(){this.visible=!0,this.element.classList.remove(c.hidden)}hide(){this.visible=!1,this.element.classList.add(c.hidden)}_bindRangeListeners(){this.element.addEventListener("mousedown",this.mouseDownListener)}_removeRangeListeners(){this.element.removeEventListener("mousedown",this.mouseDownListener),this.element.removeEventListener("mousemove",this.mouseMoveListener),document.removeEventListener("mouseup",this.mouseUpListener)}_renderDayNames(){let e=this.datePicker.weekStart;this.dayNamesElement.innerHTML="";for(let i=0;i<7;i++){let n=e%7,a=document.createElement("div");a.classList.add(c.dayName),a.setAttribute("data-day-index",n+""),a.textContent=this.datePicker.locale.daysMin[n],this.dayNamesElement.append(a),e++}}_renderWeekNumbers(){if(!this.datePicker.config.weekNumbers)return;this.weeksContainer.innerHTML="";let{viewDate:t,weekStart:e}=this.datePicker,i=new Date(t.getFullYear(),t.getMonth(),1),n=V(i,e,e),a=this._cells.length/7;for(let r=0;r<a;r++){let l=document.createElement("div");l.classList.add(c.cell,"week"),l.textContent=""+Ee(ie(n,7*r),e),this.weeksContainer.append(l)}}_destroyCells(){this._cells.forEach(t=>{this._cellsMap.delete(t.element),t.destroy()}),this._cells=[],this.cellsElement.innerHTML=""}_generateCells(){s.getDatesFunction(this.type)(this.datePicker).forEach(e=>{let i=new z(this.datePicker,this.type,e);this._cells.push(i),this._cellsMap.set(i.element,i),this.cellsElement.append(i.element)})}_onChangeView(t){t!==this.type?this.hide():(this.show(),this.render())}_onChangeViewDate(t,e){if(!this.visible)return;let i=v(t),n=v(e);switch(this.datePicker.currentView){case"days":if(f(t,e,"months"))return;break;case"months":if(f(t,e,"years"))return;break;case"years":if(i[0]===n[0]&&i[1]===n[1])return;break}this.render()}_onMouseOver(t){if(t.target instanceof HTMLElement){let e=t.target.closest(`.${c.cell}`),i=e?this._cellsMap.get(e):null;this.datePicker.setFocusDate(i?i.date:null)}}_onMouseOut(){this.datePicker.setFocusDate(null)}_onClick(t){if(t.target instanceof HTMLElement){let e=t.target.closest(`.${c.cell}`),i=e?this._cellsMap.get(e):null;if(i&&!i.disabled){if(!this.datePicker.isMinView()){this.datePicker.changeView("down");return}if(this._ignoreClick){this._ignoreClick=!1;return}let n=this.datePicker.adapter.getSelectedDate(i.date,i.type);n?this.datePicker.adapter.handleAlreadySelectedDates(n,i.date):this.datePicker.selectDate(i.date)}}}_onMouseDown(t){if(!this.datePicker.isMinView()||!(t.target instanceof HTMLElement))return;let e=t.target.closest(`.${c.cell}`),i=e?this._cellsMap.get(e):null;i&&(this._pressed=!0,this.element.addEventListener("mousemove",this.mouseMoveListener),document.addEventListener("mouseup",this.mouseUpListener),this._focusedDate=new Date(i.date),f(i.date,this.datePicker.rangeDateFrom,"days")&&(this._rangeFromFocused=!0),f(i.date,this.datePicker.rangeDateTo,"days")&&(this._rangeToFocused=!0))}_onMouseMove(t){if(!this._pressed||!this.datePicker.isMinView()||!(t.target instanceof HTMLElement))return;let e=t.target.closest(`.${c.cell}`),i=e?this._cellsMap.get(e):null,n=this.datePicker.config.onBeforeSelect,a=this.datePicker.pickerElement.classList;if(!i||i.disabled||n&&!n(i.date,this.datePicker)){a.add(c.rangeDisabled);return}let{rangeDateFrom:r,rangeDateTo:l}=this.datePicker;if(this.datePicker.selectedDates.length===2){let[h,,u]=Y([r,i.date,l]);if(this.datePicker.isDisabledDateInRange(h,u)){a.add(c.rangeDisabled);return}else a.remove(c.rangeDisabled);this._rangeFromFocused?y(i.date,l)?(i.date.setHours(l.getHours()),i.date.setMinutes(l.getMinutes()),l.setHours(r.getHours()),l.setMinutes(r.getMinutes()),this.datePicker.rangeDateTo=i.date,this.datePicker.rangeDateFrom=l,this.datePicker.replaceDate(l,i.date),this.datePicker.replaceDate(r,l),this._rangeFromFocused=!1,this._rangeToFocused=!0,this._rangeMoved=!0):w(i.date,l)&&(i.date.setHours(r.getHours()),i.date.setMinutes(r.getMinutes()),this.datePicker.rangeDateFrom=i.date,this.datePicker.replaceDate(r,i.date),this._rangeMoved=!0):this._rangeToFocused&&(w(i.date,r)?(i.date.setHours(r.getHours()),i.date.setMinutes(r.getMinutes()),r.setHours(l.getHours()),r.setMinutes(l.getMinutes()),this.datePicker.rangeDateFrom=i.date,this.datePicker.rangeDateTo=r,this.datePicker.replaceDate(r,i.date),this.datePicker.replaceDate(l,r),this._rangeToFocused=!1,this._rangeFromFocused=!0,this._rangeMoved=!0):y(i.date,r)&&(i.date.setHours(l.getHours()),i.date.setMinutes(l.getMinutes()),this.datePicker.rangeDateTo=i.date,this.datePicker.replaceDate(l,i.date),this._rangeMoved=!0))}}_onMouseUp(t){if(this._pressed=!1,this._rangeFromFocused=!1,this._rangeToFocused=!1,this._ignoreClick=!1,t.target instanceof HTMLElement&&this.datePicker.selectedDates.length===2){let e=t.target.closest(`.${c.cell}`),i=e?this._cellsMap.get(e):null;i&&f(i.date,this._focusedDate,this.type)&&this._rangeMoved&&(this._ignoreClick=!0)}this._rangeMoved=!1,this._focusedDate=null,this.element.removeEventListener("mousemove",this.mouseMoveListener),document.removeEventListener("mouseup",this.mouseUpListener)}static getDatesFunction(t){switch(t){case"days":return s.getDaysDates;case"months":return s.getMonthsDates;case"years":return s.getYearsDates}}static getDaysDates(t){let{viewDate:e,weekStart:i}=t,n=be(e),a=e.getFullYear(),r=e.getMonth(),l=new Date(a,r,1),h=new Date(a,r,n),u=[],d=l.getDay()-i,p=6-h.getDay()-i;d=d<0?d+7:d,p=p>6?p-7:p;let D=ve(l,d),P=n+d+p,T=D.getDate(),C=D.getFullYear(),I=D.getMonth();for(let _=0;_<P;_++)u.push(new Date(C,I,T+_));return u}static getMonthsDates(t){let e=t.viewDate.getFullYear(),i=[];for(let n=0;n<12;n++)i.push(new Date(e,n));return i}static getYearsDates(t){let e=t.viewDate,i=v(e),n=[];for(let a=i[0]-1;a<=i[1]+1;a++)n.push(new Date(a,0));return n}};var re={},oe=/yy(?:yy)?(?:1|2)?|mm?|MM?|dd?|DD?|o/,st=/[\s!-/:-@[-`{-~年月日]+/,xe={y:(s,t)=>new Date(s).setFullYear(parseInt(t,10)),m:(s,t,e)=>{let i=new Date(s),n=parseInt(t,10)-1;if(isNaN(n)){if(!t)return NaN;let a=t.toLowerCase(),r=l=>l.toLowerCase().startsWith(a);if(n=e.monthsShort.findIndex(r),n<0&&(n=e.months.findIndex(r)),n<0)return NaN}return i.setMonth(n),i.getMonth()!==Fe(n)?i.setDate(0):i.getTime()},d:(s,t)=>new Date(s).setDate(parseInt(t,10))},nt={d:s=>s.getDate().toString(),dd:s=>O(s.getDate(),2),D:(s,t)=>t.daysShort[s.getDay()],DD:(s,t)=>t.days[s.getDay()],o:s=>Math.round((new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime()-new Date(s.getFullYear(),0,0).getTime())/864e5).toString(),m:s=>(s.getMonth()+1).toString(),mm:s=>O(s.getMonth()+1,2),M:(s,t)=>t.monthsShort[s.getMonth()],MM:(s,t)=>t.months[s.getMonth()],yy:s=>O(s.getFullYear(),2).slice(-2),yyyy:s=>O(s.getFullYear(),4),yyyy1:s=>O(v(s)[0],4),yyyy2:s=>O(v(s)[1],4)};function O(s,t){return s.toString().padStart(t,"0")}function Fe(s){return s>-1?s%12:Fe(s+12)}function Ve(s){if(typeof s!="string")throw new Error("Invalid date format");if(s in re)return re[s];let t=s.match(new RegExp(oe,"g")),e=s.split(oe);if(!e.length||!t)throw new Error("Invalid date format");let i=t.map(a=>nt[a]),n=Object.keys(xe).reduce((a,r)=>(t.find(h=>h[0]!=="D"&&h[0].toLowerCase()===r)&&a.push(r),a),[]);return re[s]={parse:(a,r)=>{let l=a.split(st).reduce((u,d,p)=>{if(d.length>0&&t[p]){let D=t[p][0];D==="M"?u.m=d:D!=="D"&&(u[D]=d)}return u},{}),h=n.reduce((u,d)=>{let p=xe[d](u,l[d],r);return isNaN(p)?u:p},H());return new Date(h)},format:(a,r)=>i.reduce((h,u,d)=>h+`${e[d]}${u(a,r)}`,"")+e[e.length-1]}}function U(s,t,e){if(s instanceof Date||typeof s=="number"){let i=k(s);return isNaN(i)?void 0:new Date(i)}if(s){if(s==="today")return new Date(H());if(typeof t!="string"){let i=t.toValue?t.toValue(s,t,e):void 0;return typeof i!="undefined"&&!isNaN(i)?new Date(k(i)):void 0}return Ve(t).parse(s,e)}}function Ce(s,t,e){if(isNaN(s)||!s&&s!==0)return"";let i=typeof s=="number"?new Date(s):s;return typeof t!="string"?t.toDisplay?t.toDisplay(i,t,e):"":Ve(t).format(i,e)}function le(s){return typeof s=="string"?oe.test(s):!!(s.toDisplay&&s.toValue)}function q(s){if(typeof s=="object"&&s!==null){if(typeof Object.getPrototypeOf=="function"){let t=Object.getPrototypeOf(s);return t===Object.prototype||t===null}return Object.prototype.toString.call(s)==="[object Object]"}return!1}function g(...s){return s.reduce((t,e)=>{if(e===void 0)return t;if(Array.isArray(e))throw new TypeError("Arguments provided to ts-deepmerge must be objects, not arrays.");return Object.keys(e).forEach(i=>{["__proto__","constructor","prototype"].includes(i)||(Array.isArray(t[i])&&Array.isArray(e[i])?t[i]=g.options.mergeArrays?g.options.uniqueArrayItems?Array.from(new Set(t[i].concat(e[i]))):[...t[i],...e[i]]:e[i]:q(t[i])&&q(e[i])?t[i]=g(t[i],e[i]):!q(t[i])&&q(e[i])?t[i]=g(e[i],void 0):t[i]=e[i]===void 0?g.options.allowUndefinedOverrides?e[i]:t[i]:e[i])}),t},{})}var ce={allowUndefinedOverrides:!0,mergeArrays:!0,uniqueArrayItems:!0};g.options=ce;g.withOptions=(s,...t)=>{g.options=m(m({},ce),s);let e=g(...t);return g.options=ce,e};function Se(s,t,e){let i=0,n=Date.now(),a=function(...r){let l=this,h=function(){let u=Date.now()-n;t>u?i=window.setTimeout(h,t-u):(i=void 0,e||s.apply(l,r))};i||(i=window.setTimeout(h,t),e&&s.apply(l,r))};return a.cancel=function(){clearTimeout(i),i=void 0},a}function rt(){let s=new WeakMap;return{get(t){return s.get(t)},set(t,e){s.set(t,e)},delete(t){s.delete(t)}}}var he=rt(),L={days:0,months:1,years:1},ot=`<div class="${c.picker}"><div class="${c.navigation}"></div><div class="${c.content}"></div></div>`,E=class E extends N{constructor(e,i){super();o(this,"element");o(this,"config");o(this,"input");o(this,"altInput");o(this,"altInputFormat");o(this,"pickerElement");o(this,"navigationElement");o(this,"contentElement");o(this,"buttonsElement",null);o(this,"locale",E.locales.default);o(this,"dateFormat");o(this,"weekStart",0);o(this,"rtl",!1);o(this,"minDate",null);o(this,"maxDate",null);o(this,"minView","days");o(this,"maxView","years");o(this,"inline",!1);o(this,"visible",!1);o(this,"focused",!1);o(this,"focusDate",null);o(this,"viewDate",new Date(H()));o(this,"currentView","days");o(this,"selectedDates",[]);o(this,"lastSelectedDate",null);o(this,"rangeDateFrom",null);o(this,"rangeDateTo",null);o(this,"_disabledDates",[]);o(this,"_enabledDates",[]);o(this,"_isMultipleDates",!1);o(this,"_views",{});o(this,"_navigation");o(this,"_buttons");o(this,"_keyboardNav");o(this,"_container");o(this,"_position");o(this,"_inputType");o(this,"_inputId");o(this,"_inputReadOnly");o(this,"_inputDirection");o(this,"_rendered",!1);o(this,"_editMode",!1);o(this,"_active",!1);o(this,"_clicking",null);o(this,"_showing",!1);o(this,"_hideCallback",null);o(this,"changeSelectedListener");o(this,"changeFocusedListener");o(this,"inputBlurListener");o(this,"inputClickListener");o(this,"inputFocusListener");o(this,"inputMouseDownListener");o(this,"inputPasteListener");o(this,"mouseDownListener");o(this,"mouseUpListener");o(this,"resizeListener");o(this,"adapter",{setPosition:this._setPosition.bind(this),getSelectedDate:this._getSelectedDate.bind(this),handleAlreadySelectedDates:this._handleAlreadySelectedDates.bind(this),setInputValue:this._setInputValue.bind(this),enterEditMode:this._enterEditMode.bind(this),exitEditMode:this._exitEditMode.bind(this)});let n=typeof e=="string"?document.querySelector(e):e;if(!n)throw new Error("Could not find element to initialize DatePicker");this.element=n,this.element.datePicker=this,he.set(this.element,this),this.config=g({},me(),E.defaults,i),this._parseConfig(),this._initInputs(),this._processDates(),this._limitViewDate(),this.inline=this.config.inline||!this.input,this._container=this._getContainer(),this.pickerElement=document.createElement("div"),this.pickerElement.classList.add(c.datepicker),this.pickerElement.innerHTML=ot,this.changeFocusedListener=({detail:{date:a,view:r,moveToOther:l}})=>this._onChangeFocusedDate(a,r,l),this.changeSelectedListener=({detail:{silent:a}})=>this._onChangeSelectedDate(a),this.on("_changeFocusedDate",this.changeFocusedListener),this.on("_changeSelectedDate",this.changeSelectedListener),this._bindConfigEvents(),this.inputBlurListener=this._onBlurInput.bind(this),this.inputClickListener=()=>this._onClickInput(),this.inputFocusListener=()=>this._onFocusInput(),this.inputMouseDownListener=()=>this._onMouseDownInput(),this.inputPasteListener=this._onPasteInput.bind(this),this.mouseDownListener=()=>this._onMouseDown(),this.mouseUpListener=()=>this._onMouseUp(),this.resizeListener=Se(()=>this._onResize(),300),this.pickerElement.addEventListener("mousedown",this.mouseDownListener),this.pickerElement.addEventListener("mouseup",this.mouseUpListener),(this.input||this.altInput)&&this._bindInputEvents(),this.inline||window.addEventListener("resize",this.resizeListener),this.config.keyboardNav&&(this._keyboardNav=new K(this)),this.navigationElement=this.pickerElement.querySelector(`.${c.navigation}`),this.contentElement=this.pickerElement.querySelector(`.${c.content}`),this.inline&&this.show()}destroy(){var e,i,n,a;this.off(),this.hide(),this._removeInputEvents(),this.pickerElement.removeEventListener("mousedown",this.mouseDownListener),this.pickerElement.removeEventListener("mouseup",this.mouseUpListener),window.removeEventListener("resize",this.resizeListener),(e=this._keyboardNav)==null||e.destroy(),(i=this._navigation)==null||i.destroy(),this._navigation=null,(n=this._buttons)==null||n.destroy(),this._buttons=null,this.pickerElement.remove(),this.pickerElement=null,this.navigationElement=null,this.contentElement=null,this.buttonsElement=null,this.input&&(this._inputType&&(this.input.type=this._inputType),this._inputId&&(this.input.id=this._inputId),this._inputReadOnly!==void 0&&(this.input.readOnly=this._inputReadOnly)),this.input=null,this.element.dir=this._inputDirection,(a=this.altInput)==null||a.remove(),this.altInput=null,he.delete(this.element),delete this.element.datePicker,this.element=null}isDateSelected(e,i="days"){return this.selectedDates.some(n=>f(e,n,i))}selectDate(e,i=!1){if(Array.isArray(e))return e.map(r=>this.selectDate(r,i)).some(r=>r);if(typeof e=="string"&&this._isMultipleDates)return this.selectDate(e.split(this.config.dateDelimiter||","),i);let n=this.parseDate(e);if(n===void 0||this.isDateDisabled(n))return!1;let a;if(this.config.onBeforeSelect&&!i&&!this.config.onBeforeSelect(n,this)||this.config.range&&this.selectedDates.length===1&&this.isDisabledDateInRange(this.selectedDates[0],n))return!1;if(this.currentView==="days"&&(n.getMonth()!==this.viewDate.getMonth()||n.getFullYear()!==this.viewDate.getFullYear())&&(a=new Date(n.getFullYear(),n.getMonth(),1)),(this.currentView==="years"||this.currentView==="months")&&n.getFullYear()!==this.viewDate.getFullYear()&&(a=new Date(n.getFullYear(),0,1)),a&&this.setViewDate(a),this._isMultipleDates&&!this.config.range){if(this.selectedDates.length===this.config.multipleDates)return!1;this.isDateSelected(n)||this.selectedDates.push(n)}else if(this.config.range)switch(this.selectedDates.length){case 1:this.selectedDates.push(n),this.rangeDateTo||(this.rangeDateTo=n),y(this.rangeDateFrom,this.rangeDateTo)&&(this.rangeDateTo=this.rangeDateFrom,this.rangeDateFrom=n),this.selectedDates=[this.rangeDateFrom,this.rangeDateTo];break;case 2:this.selectedDates=[n],this.rangeDateFrom=n,this.rangeDateTo=null;break;default:this.selectedDates=[n],this.rangeDateFrom=n}else this.selectedDates=[n];return this.trigger("_changeSelectedDate",{date:n,selected:!0,silent:i}),this._setLastSelectedDate(n),this.config.autoClose&&this.visible&&(!this._isMultipleDates&&!this.config.range||this.config.range&&this.selectedDates.length===2)&&this.hide(),!0}deselectDate(e){let i=this.parseDate(e);i!==void 0&&this.selectedDates.some((n,a)=>{if(f(n,i,"days"))return this.selectedDates.splice(a,1),this.selectedDates.length?(this.rangeDateTo=null,this.rangeDateFrom=this.selectedDates[0],this._setLastSelectedDate(this.selectedDates[this.selectedDates.length-1])):(this.rangeDateFrom=null,this.rangeDateTo=null,this._setLastSelectedDate(null)),this.trigger("_changeSelectedDate",{date:i,selected:!1}),!0})}replaceDate(e,i){let n=this.selectedDates.findIndex(a=>f(a,e,this.currentView));n<0||f(this.selectedDates[n],i,this.currentView)||(this.selectedDates[n]=i,this.trigger("_changeSelectedDate",{date:i,selected:!0}),this._setLastSelectedDate(i))}setFocusDate(e,i){this.focusDate=e,this.trigger("_changeFocusedDate",{date:e,view:this.currentView,moveToOther:i})}setViewDate(e){if(f(e,this.viewDate,"days"))return;let i=this.viewDate;this.viewDate=e,this.trigger("changeViewDate",{date:e,oldDate:i,datePicker:this})}next(){let e=this.viewDate.getFullYear(),i=this.viewDate.getMonth();switch(this.currentView){case"days":this.setViewDate(new Date(e,i+1,1));break;case"months":this.setViewDate(new Date(e+1,i,1));break;case"years":this.setViewDate(new Date(e+10,0,1));break}}prev(){let e=this.viewDate.getFullYear(),i=this.viewDate.getMonth();switch(this.currentView){case"days":this.setViewDate(new Date(e,i-1,1));break;case"months":this.setViewDate(new Date(e-1,i,1));break;case"years":this.setViewDate(new Date(e-10,0,1));break}}changeView(e,i=!1){if(e==="up"?e=this.currentView==="days"?"months":"years":e==="down"&&(e=this.currentView==="years"?"months":"days"),!S.includes(e))return;L[e]>L[this.maxView]?e=this.maxView:L[e]<L[this.minView]&&(e=this.minView);let n=this.focusDate||this.viewDate;this.setViewDate(new Date(n.getFullYear(),n.getMonth(),1)),!(!S.includes(e)||this.currentView===e)&&(this.currentView=e,(this.altInput||this.input)&&this.visible&&this._setPosition(void 0,!0),this.trigger("_changeCurrentView",e),this._views[e]||(this._views[e]=new B(this,e),this.contentElement.append(this._views[e].element)),i||this.trigger("changeView",{view:e,datePicker:this}))}isMinView(){return this.currentView===this.minView}isMaxView(){return this.currentView===this.maxView}formatDate(e,i){return Ce(e,i||this.dateFormat,this.locale)}parseDate(e,i){return U(e,i||this.dateFormat,this.locale)}disableDates(e){var n,a;e=Array.isArray(e)?e:[e];let i=this._parseDateRules(e);if(!this._enabledDates.length){this._disabledDates=i,(n=this._views[this.currentView])==null||n.render();return}i.forEach(r=>{if(typeof r=="function"){let l=this._enabledDates.indexOf(r);l>=0&&this._enabledDates.splice(l,1)}else if(r instanceof Date){let l=this._enabledDates.findIndex(h=>h instanceof Date&&f(h,r,"days"));l>=0&&this._enabledDates.splice(l,1)}else{let l=this._enabledDates.findIndex(h=>{if(!(h instanceof Date||typeof h=="function"))return f(h.from,r.from,"days")&&f(h.to,r.to,"days")});l>=0&&this._enabledDates.splice(l,1)}}),(a=this._views[this.currentView])==null||a.render()}enableDates(e){var i;e=typeof e=="boolean"||Array.isArray(e)?e:[e],this._enabledDates=Array.isArray(e)?this._parseDateRules(e):[],this._disabledDates=[],(i=this._views[this.currentView])==null||i.render()}isDateDisabled(e){if(this.minDate&&w(e,this.minDate)||this.maxDate&&y(e,this.maxDate))return!0;if(!this._enabledDates.length&&!this._disabledDates.length)return!1;let i=!this._enabledDates.length,n=this._enabledDates.length?this._enabledDates:this._disabledDates;for(let a=0,r;a<n.length;a++)return r=n[a],typeof r=="function"?r(e)?i:!i:r instanceof Date?r.getTime()===e.getTime()?i:!i:e.getTime()>=r.from.getTime()&&e.getTime()<=r.to.getTime()?i:!i;return!i}isDisabledDateInRange(e,i){[e,i]=Y([e,i]);let n=k(i);for(let a=k(e);a<=n;a+=864e5)if(this.isDateDisabled(new Date(a)))return!0;return!1}show(){if(this.visible)return;let e=this.altInput||this.input;if(e){if(e.disabled)return;e!==document.activeElement&&(this._showing=!0,e.focus(),this._showing=!1)}this._render(),this._syncTextDirection(),e&&!this.inline&&this._setPosition(),this.pickerElement.classList.add(c.active),this.visible=!0,this.trigger("show",this)}hide(){!this.visible||this.inline||(this._exitEditMode(),this.visible=!1,this.pickerElement.classList.remove(c.active),this._hideCallback&&(this._hideCallback(),this._hideCallback=null),this.trigger("hide",this))}clear(e=!1){this.selectedDates=[],this.rangeDateFrom=null,this.rangeDateTo=null,this.lastSelectedDate=null,this.trigger("_changeSelectedDate",{date:null,selected:!1,silent:e})}update(e,i=!1){var h,u,d,p,D;let n=this.currentView,a=g({},this.config);this.config=g(this.config,e),this._parseConfig(),this._limitViewDate(),this.currentView=n,this.element.dir=this.rtl?"rtl":"ltr",this.inline=this.config.inline||!this.input,window.removeEventListener("resize",this.resizeListener),this.inline||window.addEventListener("resize",this.resizeListener),!this.config.altInput&&this.altInput&&this._removeAltInput(),this.config.altInput&&(this.altInput&&this.config.altInput instanceof HTMLInputElement&&this.config.altInput!==this.altInput&&this._removeAltInput(),this.altInput||this._createAltInput()),(this.altInput||this.input)&&(this._removeInputEvents(),this._bindInputEvents()),(this.config.multipleDates===0||e.multipleDates===!1)&&(this.config.multipleDates=1),this._isMultipleDates=this.config.multipleDates===!0||this.config.multipleDates>1,this.config.startView!==this.currentView&&this.changeView(this.config.startView,i),this.config.defaultDate&&(this.selectedDates=[],this.selectDate(this.config.defaultDate,i)),this._setInputValue(),a.range&&!this.config.range?(this.rangeDateFrom=null,this.rangeDateTo=null):!a.range&&this.config.range&&this.selectedDates.length&&(this.rangeDateFrom=this.selectedDates[0]||null,this.rangeDateTo=this.selectedDates[1]||null),this.config.buttons&&!this._buttons&&this._rendered&&this._initButtons(),(h=this._buttons)==null||h.update(),a.buttons&&!this.config.buttons&&((u=this.buttonsElement)==null||u.remove(),this.buttonsElement=null,(d=this._buttons)==null||d.destroy(),this._buttons=null);let r=this._getContainer();r!==this._container&&(this._container=r,this._rendered&&this._attachToContainer());let l=this.pickerElement.classList;if(a.classes!==this.config.classes){let P=M(a.classes),T=M(this.config.classes);P.length&&l.remove(...P),T.length&&l.add(...T)}l.add(c.datepicker),l.toggle(c.inline,this.inline),l.toggle(c.hasWeekNumbers,this.config.weekNumbers),(p=this._navigation)==null||p.update(),(this.visible||this.inline)&&(l.add(c.active),(D=this._views[this.currentView])==null||D.update(),this._syncTextDirection(),(this.altInput||this.input)&&!this.inline&&this._setPosition())}isOtherMonth(e){return e.getMonth()!==this.viewDate.getMonth()}isOtherYear(e){return e.getFullYear()!==this.viewDate.getFullYear()}isOtherDecade(e){let[i,n]=v(this.viewDate),a=e.getFullYear();return a<i||a>n}isEditMode(){return this._editMode}_parseConfig(){let e=this.config,{dateFormat:i,locale:n,maxView:a,minView:r,startView:l}=e,h=null;!i&&"format"in e&&e.format&&(i=e.format,e.dateFormat=i),n&&typeof n!="string"?h=n:typeof n=="string"&&n!=="default"&&(E.locales[n]?h=E.locales[n]:(n=n.split("-")[0],E.locales[n]&&(h=E.locales[n]))),this.locale=h?m(m({},E.locales.default),h):E.locales.default,this.dateFormat=i&&le(i)?i:this.locale.format,this.altInputFormat=e.altInputFormat&&le(e.altInputFormat)?e.altInputFormat:G.altInputFormat,this.weekStart=e.weekStart||e.weekStart===0?e.weekStart:this.locale.weekStart,this.rtl=e.rtl!==null?e.rtl:this.locale.rtl||this.element.dir==="rtl"||!1,(e.multipleDates===0||e.multipleDates===!1)&&(e.multipleDates=1),this._isMultipleDates=e.multipleDates===!0||e.multipleDates>1,r&&S.includes(r)&&(this.minView=r),a&&S.includes(a)&&(a=L[a]>=L[this.minView]?a:this.minView,this.maxView=a),l&&S.includes(l)&&(L[l]>L[this.maxView]&&(l=this.maxView),L[l]<L[this.minView]&&(l=this.minView),this.currentView=l),e.maxDate!==null&&(this.maxDate=U(e.maxDate,this.dateFormat,this.locale)||null),e.minDate!==null&&(this.minDate=U(e.minDate,this.dateFormat,this.locale)||null),e.position&&(typeof e.position=="string"?(this._position=this._parsePositionString(e.position),e.position=this._position.y+" "+this._position.x):this._position=e.position)}_parsePositionString(e){let i=e.toLowerCase().split(/\s+/g);return i.length!==2&&(i=[i.find(n=>n==="top"||n==="middle"||n==="bottom")||"auto",i.find(n=>n==="left"||n==="center"||n==="right")||"auto"]),{y:i[0],x:i[1]}}_initInputs(){this.element instanceof HTMLInputElement&&(this.input=this.element,this._inputType=this.input.type,this._inputId=this.input.id,this._inputReadOnly=this.input.readOnly,this.input.type="text",this.input.readOnly=!this.config.allowInput),this._inputDirection=this.element.dir,this.element.dir=this.rtl?"rtl":"ltr",this.config.altInput&&(this.altInput=this._createAltInput())}_bindInputEvents(){let e=this.altInput||this.input,i=this.config.showOn;(i==="click"||i===!0)&&(e.addEventListener("mousedown",this.inputMouseDownListener),e.addEventListener("click",this.inputClickListener)),(i==="focus"||i===!0)&&e.addEventListener("focus",this.inputFocusListener),e.addEventListener("blur",this.inputBlurListener),e.addEventListener("paste",this.inputPasteListener)}_removeInputEvents(){var e,i,n,a,r,l,h,u,d,p;(e=this.input)==null||e.removeEventListener("click",this.inputClickListener),(i=this.input)==null||i.removeEventListener("focus",this.inputFocusListener),(n=this.input)==null||n.removeEventListener("blur",this.inputBlurListener),(a=this.input)==null||a.removeEventListener("mousedown",this.inputMouseDownListener),(r=this.input)==null||r.removeEventListener("paste",this.inputPasteListener),(l=this.altInput)==null||l.removeEventListener("click",this.inputClickListener),(h=this.altInput)==null||h.removeEventListener("focus",this.inputFocusListener),(u=this.altInput)==null||u.removeEventListener("blur",this.inputBlurListener),(d=this.altInput)==null||d.removeEventListener("mousedown",this.inputMouseDownListener),(p=this.altInput)==null||p.removeEventListener("paste",this.inputPasteListener)}_createAltInput(){let e;return this.config.altInput instanceof HTMLInputElement?(e=this.config.altInput,this.input&&(e.dir=this.input.dir)):(e=document.createElement("input"),e.type="text",e.readOnly=!this.config.allowInput,this.input&&(this.input.id&&(e.id=this.input.id),e.placeholder=this.input.placeholder,e.disabled=this.input.disabled,e.required=this.input.required,e.tabIndex=this.input.tabIndex,e.dir=this.input.dir,this.input.type="hidden",this.input.id="")),this.input?this.input.after(e):this.element.contains(this.pickerElement)?this.pickerElement.before(e):this.element.append(e),e}_removeAltInput(){var e;(e=this.altInput)==null||e.remove(),this.altInput=void 0,this.input&&(this.input.type="text",this._inputId&&(this.input.id=this._inputId))}_processDates(){var a;let e=this.config.defaultDate||((a=this.input)==null?void 0:a.value)||this.element.dataset.date||null;e&&this.selectDate(e,!0);let{disabledDates:i,enabledDates:n}=this.config;n&&n.length?this._enabledDates=this._parseDateRules(n):i&&i.length&&(this._disabledDates=this._parseDateRules(i))}_parseDateRules(e){return e.slice().map(i=>{if(typeof i=="function")return i;if(typeof i=="string"||typeof i=="number"||i instanceof Date)return this.parseDate(i);if(i.from&&i.to)return{from:this.parseDate(i.from),to:this.parseDate(i.to)}}).filter(i=>i)}_limitViewDate(){this.maxDate&&y(this.viewDate,this.maxDate)&&this.setViewDate(this.maxDate),this.minDate&&w(this.viewDate,this.minDate)&&this.setViewDate(this.minDate)}_getContainer(){let e=this.config.container;return e?typeof e=="string"?document.querySelector(e)||document.body:e||document.body:document.body}_bindConfigEvents(){if(this.config.onShow){let e=this.config.onShow;this.on("show",()=>e(this))}if(this.config.onHide){let e=this.config.onHide;this.on("hide",()=>e(this))}if(this.config.onFocus){let e=this.config.onFocus;this.on("focus",({detail:{date:i,view:n}})=>e(i,n,this))}if(this.config.onChangeDate){let e=this.config.onChangeDate;this.on("changeDate",({detail:{date:i,formatted:n}})=>e(i,n,this))}if(this.config.onChangeView){let e=this.config.onChangeView;this.on("changeView",({detail:{view:i}})=>e(i,this))}if(this.config.onChangeViewDate){let e=this.config.onChangeViewDate;this.on("changeViewDate",({detail:{date:i,oldDate:n}})=>e(i,n,this))}}_render(){if(this._rendered)return;this._rendered=!0,this._attachToContainer(),this.inline&&this.pickerElement.classList.add(c.inline),this.config.weekNumbers&&this.pickerElement.classList.add(c.hasWeekNumbers);let e=M(this.config.classes);e.length&&this.pickerElement.classList.add(...e),this._views[this.currentView]=new B(this,this.currentView),this.contentElement.append(this._views[this.currentView].element),this._navigation=new $(this),this.navigationElement.append(this._navigation.element),this.config.buttons&&this._initButtons()}_attachToContainer(){this.input?this.inline?this.element.after(this.pickerElement):this._container.append(this.pickerElement):this.element.append(this.pickerElement)}_initButtons(){this.buttonsElement=document.createElement("div"),this.buttonsElement.classList.add(c.buttons),this._buttons=new R(this),this.buttonsElement.append(this._buttons.element),this.pickerElement.firstElementChild.append(this.buttonsElement)}_getInputValue(e){return this.selectedDates.length?this.selectedDates.map(i=>this.formatDate(i,e)).join(this.config.dateDelimiter):""}_setInputValue(){this.altInput&&(this.altInput.value=this._getInputValue(this.altInputFormat));let e=this._getInputValue();this.input?this.input.value=e:this.element.setAttribute("data-date",e),this.element.dispatchEvent(new Event("change",{bubbles:!0}))}_triggerDateChange(){let e=[],i=[],n=this._isMultipleDates||this.config.range;this.selectedDates.length&&(e=this.selectedDates.map(a=>new Date(a)),i=e.map(a=>this.formatDate(a))),this.trigger("changeDate",{date:n?e:e[0],formatted:n?i:i[0],datePicker:this})}_syncTextDirection(){let e=this.altInput||this.input,i=te(e||this.element),n=(e==null?void 0:e.parentElement)||this.element;!n||i!==te(n)?this.pickerElement.dir=i:this.pickerElement.dir&&this.pickerElement.removeAttribute("dir")}_setPosition(e,i=!1){if(e=e||this._position,typeof e=="function"){this._hideCallback=e(this.pickerElement,this.element,i,this)||null;return}let n=this.altInput||this.input;if(!n)return;typeof e=="string"&&(e=this._parsePositionString(e));let{y:a,x:r}=e;this.pickerElement.style.display="block";let l=this.pickerElement.getBoundingClientRect(),h=this.pickerElement.offsetParent;this.pickerElement.style.display="";let u=n.getBoundingClientRect(),d=u.top,p=u.left;if(h===document.body||!h)d+=window.scrollY,p+=window.scrollX;else{let b=h.getBoundingClientRect();d-=b.top-h.scrollTop,p-=b.left-h.scrollLeft}let D=this.config.offset,P=ee(n),T=0,C=0,{clientHeight:I,clientWidth:_}=document.documentElement;if(P){let b=P.getBoundingClientRect();b.top>0&&(T=b.top),b.left>0&&(C=b.left),b.right<_&&(_=b.right),b.bottom<I&&(I=b.bottom)}let X=0;r==="auto"&&(u.left<C?(r="left",X=C-u.left):u.left+l.width>_?(r="right",_<u.right&&(X=_-u.right)):this.rtl?r=u.right-l.width<C?"left":"right":r="left"),r==="right"?p+=u.width-l.width:r==="center"&&(p+=u.width/2-l.width/2),p+=X,a==="auto"&&(u.top-l.height>T?a=u.bottom+l.height>I?"top":"bottom":a="bottom"),a==="top"?d-=l.height+D:a==="middle"?d+=u.height/2-l.height/2:d+=u.height+D;let ue=this.pickerElement.classList;ue.remove(...Object.values(c.positions)),ue.add(c.positions[r],c.positions[a]),this.pickerElement.style.top=d+"px",this.pickerElement.style.left=p+"px"}_setLastSelectedDate(e){this.lastSelectedDate=e,this.trigger("_changeLastSelectedDate",e||void 0)}_enterEditMode(){let e=this.altInput||this.input;!e||e.readOnly||!this.visible||this._editMode||(this._editMode=!0,e.classList.add(c.editMode))}_exitEditMode(e=!1){let i=this.altInput||this.input;!i||!this._editMode||(this._editMode=!1,i.classList.remove(c.editMode),e&&this._updateFromInput())}_updateFromInput(){let e=this.altInput||this.input;if(!e)return;let i=e.value;if(i){let n=this.selectedDates.slice();this.clear(),this.selectDate(i)||this.selectDate(n)}else this.clear()}_getSelectedDate(e,i="days"){let n=null;return this.selectedDates.some(a=>{let r=f(e,a,i);return n=r&&a||null,r}),n}_handleAlreadySelectedDates(e,i){let n=this.selectedDates.length,a=!!(this.config.range&&n===1&&e),r=a?new Date(i):i;this.config.range&&!this.config.toggleSelected&&(n!==2&&this.selectDate(r),n===2&&f(this.rangeDateFrom,this.rangeDateTo,"days"))||(this.config.toggleSelected?this.deselectDate(r):this._setLastSelectedDate(a?r:e))}_onChangeFocusedDate(e,i,n){e&&((!this.config.range||!this.selectedDates.length)&&this.pickerElement.classList.remove(c.rangeDisabled),this.config.range&&this.selectedDates.length===1&&this.pickerElement.classList.toggle(c.rangeDisabled,this.isDisabledDateInRange(this.selectedDates[0],e)),n&&(this.isOtherMonth(e)||this.isOtherYear(e)||this.isOtherDecade(e))&&this.setViewDate(e),this.trigger("focus",{date:e,view:i,datePicker:this}))}_onChangeSelectedDate(e){setTimeout(()=>{this._setInputValue(),e||this._triggerDateChange()})}_onBlurInput(e){this.focused&&e.stopImmediatePropagation(),!this.focused&&this.visible&&!this.inline&&(this.config.updateOnBlur?this._exitEditMode(!0):this._setInputValue(),this.hide())}_onClickInput(){this._clicking&&(clearTimeout(this._clicking),this._clicking=null,this._active&&this._enterEditMode(),this._active=!1,!this.visible&&!this.inline&&this.show())}_onFocusInput(){!this.visible&&!this.inline&&!this._showing&&this.show()}_onMouseDownInput(){let e=this.config.showOn;(this.visible||e==="click"||e===!0)&&(this._active=document.activeElement===(this.altInput||this.input),this._clicking=window.setTimeout(()=>{this._active=!1,this._clicking=null},2e3))}_onPasteInput(e){var i;this.config.allowInput&&((i=e.clipboardData)!=null&&i.types.includes("text/plain"))&&this._enterEditMode()}_onMouseDown(){this.focused=!0}_onMouseUp(){var e;this.focused=!1,(e=this.altInput||this.input)==null||e.focus()}_onResize(){this.visible&&typeof this.config.position!="function"&&this._setPosition()}static get locales(){return De}static getInstance(e){return he.get(e)}static setDefaults(e){this.defaults=g({},this.defaults,e)}};o(E,"defaults",{});var J=E;

if(__exports != exports)module.exports = exports;return module.exports}));
//# sourceMappingURL=datepicker.min.js.map
